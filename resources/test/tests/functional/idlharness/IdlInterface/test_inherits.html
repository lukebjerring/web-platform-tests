<!DOCTYPE HTML>
<html>

<head>
  <meta charset="utf-8">
  <meta name="variant" content="">
  <meta name="variant" content="?keep-promise">
  <title>idlharness: interface inheritance</title>
  <script src="/resources/test/variants.js"></script>
  <script src="/resources/testharness.js"></script>
  <script src="/resources/testharnessreport.js"></script>
  <script src="/resources/WebIDLParser.js"></script>
  <script src="/resources/idlharness.js"></script>
</head>

<body>
  <p>Verify the series of sub-tests that are executed for "inherits" interface objects.</p>
  <script>
    "use strict";

    Object.defineProperty(window, "Foo", {
      enumerable: false,
      writable: true,
      configurable: true,
      value: function Foo() {}
    });
    Object.defineProperty(window.Foo, "prototype", {
      writable: false,
      value: {}
    });
    Object.defineProperty(window.Foo.prototype, "constructor", {
      enumerable: false,
      writable: true,
      configurable: true,
      value: window.Foo
    });
    Foo.prototype[Symbol.toStringTag] = "Foo";

    // base not found
    (() => {
      const idlArray = new IdlArray();
      idlArray.add_idls(
`[Constructor()]
interface Foo : B {};`);
      idlArray.test();
    })();
  </script>
  <script type="text/json" id="expected">
{
  "summarized_status": {
    "status_string": "OK",
    "message": null
  },
  "summarized_tests": [
    {
      "name": "Foo inheritance stack",
      "status_string": "FAIL",
      "properties": {},
      "message": "Foo inherits B, but B is undefined."
    },
    {
      "name": "Foo interface: existence and properties of interface object",
      "status_string": "PASS",
      "properties": {},
      "message": null
    },
    {
      "name": "Foo interface object length",
      "status_string": "PASS",
      "properties": {},
      "message": null
    },
    {
      "name": "Foo interface object name",
      "status_string": "PASS",
      "properties": {},
      "message": null
    },
    {
      "name": "Foo interface: existence and properties of interface prototype object",
      "status_string": "FAIL",
      "properties": {},
      "message": "assert_equals: Class name for prototype of Foo.prototype is not \"BPrototype\" expected \"[object BPrototype]\" but got \"[object Object]\""
    },
    {
      "name": "Foo interface: existence and properties of interface prototype object's \"constructor\" property",
      "status_string": "PASS",
      "properties": {},
      "message": null
    },
    {
      "name": "Foo interface: existence and properties of interface prototype object's @@unscopables property",
      "status_string": "PASS",
      "properties": {},
      "message": null
    }
  ],
  "type": "complete"
}
</script>
</body>

</html>
